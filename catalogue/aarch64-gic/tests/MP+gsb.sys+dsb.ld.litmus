AArch64 MP+gsb.sys+dsb.ld
{
 [INTID(A)]=(enabled:0,affinity:P0);
 0:X1=x;
 0:X2=gicval_t:(intid:A, affinity:P1);
 0:X3=gicval_t:(intid:A);
 1:X1=x;
 1:X2=gicval_t:(intid:A);
}
 P0              | P1                    ;
 GIC  CDAFF, X2  | LDR  X0, [X1]         ;
 GIC  CDEN, X3   | DSB  LD               ;
 GSB  SYS        | GIC  CDRCFG, X2       ;
 MOV  X0, #1     | ISB                   ;
 STR  X0, [X1]   | MRS  X3, ICC_ICSR_EL1 ;

exists(1:X0=1 /\
       (1:X3=intval_t:(enabled:0, affinity:P0) \/
        1:X3=intval_t:(enabled:1, affinity:P0) \/
        1:X3=intval_t:(enabled:0, affinity:P1)));

