<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>ASLTypingReference (herdtools7.ASLTypingReference)</title><link rel="stylesheet" href="../odoc.support/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.2.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="index.html">Up</a> â€“ <a href="index.html">herdtools7</a> &#x00BB; ASLTypingReference</nav><header class="odoc-preamble"><h1 id="asl-typing-reference"><a href="#asl-typing-reference" class="anchor"></a>ASL Typing Reference</h1></header><nav class="odoc-toc"><ul><li><a href="#disclaimer">Disclaimer</a></li><li><a href="#typing">Typing</a><ul><li><a href="#checking-compatibility-of-operators">Checking Compatibility of operators</a></li><li><a href="#typing-of-expressions">Typing of Expressions</a><ul><li><a href="#typingrule.lit">TypingRule.Lit</a><ul><li><a href="#rule">Rule</a></li><li><a href="#example">Example</a></li></ul></li><li><a href="#typingrule.typedexpr">TypingRule.TypedExpr</a><ul><li><a href="#rule_2">Rule</a></li><li><a href="#example_2">Example</a></li></ul></li><li><a href="#typingrule.elocalvarconstant">TypingRule.ELocalVarConstant</a><ul><li><a href="#rule_3">Rule</a></li><li><a href="#example_3">Example</a></li></ul></li><li><a href="#typingrule.elocalvar">TypingRule.ELocalVar</a><ul><li><a href="#rule_4">Rule</a></li><li><a href="#example_4">Example</a></li></ul></li><li><a href="#typingrule.eglobalvarconstantval">TypingRule.EGlobalVarConstantVal</a><ul><li><a href="#rule_5">Rule</a></li><li><a href="#example_5">Example</a></li></ul></li><li><a href="#typingrule.eglobalvar">TypingRule.EGlobalVar</a><ul><li><a href="#rule_6">Rule</a></li><li><a href="#example_6">Example</a></li></ul></li><li><a href="#typingrule.eundefident">TypingRule.EUndefIdent</a><ul><li><a href="#rule_7">Rule</a></li><li><a href="#example_7">Example</a></li></ul></li><li><a href="#typingrule.binop">TypingRule.Binop</a><ul><li><a href="#rule_8">Rule</a></li><li><a href="#example_8">Example</a></li></ul></li><li><a href="#typingrule.unop">TypingRule.Unop</a><ul><li><a href="#rule_9">Rule</a></li><li><a href="#example_9">Example</a></li></ul></li><li><a href="#typingrule.econd">TypingRule.ECond</a><ul><li><a href="#rule_10">Rule</a></li><li><a href="#example_10">Example</a></li></ul></li><li><a href="#typingrule.etuple">TypingRule.ETuple</a><ul><li><a href="#rule_11">Rule</a></li><li><a href="#example_11">Example</a></li></ul></li><li><a href="#typingrule.econcatempty">TypingRule.EConcatEmpty</a><ul><li><a href="#rule_12">Rule</a></li><li><a href="#example_12">Example</a></li></ul></li><li><a href="#typingrule.econcat">TypingRule.EConcat</a><ul><li><a href="#rule_13">Rule</a></li><li><a href="#example_13">Example</a></li></ul></li><li><a href="#typingrule.erecordnotarecord">TypingRule.ERecordNotARecord</a><ul><li><a href="#rule_14">Rule</a></li><li><a href="#example_14">Example</a></li></ul></li><li><a href="#typingrule.erecordmissingfield">TypingRule.ERecordMissingField</a><ul><li><a href="#rule_15">Rule</a></li><li><a href="#example_15">Example</a></li></ul></li><li><a href="#typingrule.erecord">TypingRule.ERecord</a><ul><li><a href="#rule_16">Rule</a></li><li><a href="#example_16">Example</a></li></ul></li><li><a href="#typingrule.ecall">TypingRule.ECall</a><ul><li><a href="#rule_17">Rule</a></li><li><a href="#example_17">Example</a></li></ul></li><li><a href="#typingrule.eunknown">TypingRule.EUnknown</a><ul><li><a href="#rule_18">Rule</a></li><li><a href="#example_18">Example</a></li></ul></li><li><a href="#typingrule.eslice">TypingRule.ESlice</a><ul><li><a href="#rule_19">Rule</a></li><li><a href="#example_19">Example</a></li></ul></li><li><a href="#typingrule.egetarray">TypingRule.EGetArray</a><ul><li><a href="#rule_20">Rule</a></li><li><a href="#example_20">Example</a></li></ul></li><li><a href="#typingrule.egetrecordfield">TypingRule.EGetRecordField</a><ul><li><a href="#rule_21">Rule</a></li><li><a href="#example_21">Example</a></li></ul></li><li><a href="#typingrule.egetbadbitfield">TypingRule.EGetBadBitField</a><ul><li><a href="#rule_22">Rule</a></li><li><a href="#example_22">Example</a></li></ul></li><li><a href="#typingrule.egetbitfield">TypingRule.EGetBitField</a><ul><li><a href="#rule_23">Rule</a></li><li><a href="#example_23">Example</a></li></ul></li><li><a href="#typingrule.egetbitfieldnested">TypingRule.EGetBitFieldNested</a><ul><li><a href="#rule_24">Rule</a></li><li><a href="#example_24">Example</a></li></ul></li><li><a href="#typingrule.egetbitfieldtyped">TypingRule.EGetBitFieldTyped</a><ul><li><a href="#rule_25">Rule</a></li><li><a href="#example_25">Example</a></li></ul></li><li><a href="#typingrule.egetbitfields">TypingRule.EGetBitFields</a><ul><li><a href="#rule_26">Rule</a></li><li><a href="#example_26">Example</a></li></ul></li><li><a href="#typingrule.epattern">TypingRule.EPattern</a><ul><li><a href="#rule_27">Rule</a></li><li><a href="#example_27">Example</a></li></ul></li></ul></li><li><a href="#typing-of-left-hand-side-expressions">Typing of Left-Hand-Side Expressions</a><ul><li><a href="#typingrule.leignore">TypingRule.LEIgnore</a><ul><li><a href="#rule_28">Rule</a></li><li><a href="#example_28">Example</a></li></ul></li><li><a href="#typingrule.lelocalvar">TypingRule.LELocalVar</a><ul><li><a href="#rule_29">Rule</a></li><li><a href="#example_29">Example</a></li></ul></li><li><a href="#typingrule.leglobalvar">TypingRule.LEGlobalVar</a><ul><li><a href="#rule_30">Rule</a></li><li><a href="#example_30">Example</a></li></ul></li><li><a href="#typingrule.letuple">TypingRule.LETuple</a><ul><li><a href="#rule_31">Rule</a></li><li><a href="#example_31">Example</a></li></ul></li><li><a href="#typingrule.leslice">TypingRule.LESlice</a><ul><li><a href="#rule_32">Rule</a></li><li><a href="#example_32">Example</a></li></ul></li><li><a href="#typingrule.lesetarray">TypingRule.LESetArray</a><ul><li><a href="#rule_33">Rule</a></li><li><a href="#example_33">Example</a></li></ul></li><li><a href="#typingrule.lesetfield">TypingRule.LESetField</a><ul><li><a href="#rule_34">Rule</a></li><li><a href="#example_34">Example</a></li></ul></li><li><a href="#typingrule.lesetfields">TypingRule.LESetFields</a><ul><li><a href="#rule_35">Rule</a></li><li><a href="#example_35">Example</a></li></ul></li></ul></li><li><a href="#typing-of-local-declarations">Typing of Local Declarations</a><ul><li><a href="#typingrule.ldignorenone">TypingRule.LDIgnoreNone</a><ul><li><a href="#rule_36">Rule</a></li><li><a href="#example_36">Example</a></li></ul></li><li><a href="#typingrule.ldignoresome">TypingRule.LDIgnoreSome</a><ul><li><a href="#rule_37">Rule</a></li><li><a href="#example_37">Example</a></li></ul></li><li><a href="#typingrule.ldvar">TypingRule.LDVar</a><ul><li><a href="#rule_38">Rule</a></li><li><a href="#example_38">Example</a></li></ul></li><li><a href="#typingrule.lduninitialisedtypedtuple">TypingRule.LDUninitialisedTypedTuple</a><ul><li><a href="#rule_39">Rule</a></li><li><a href="#example_39">Example</a></li></ul></li><li><a href="#typingrule.ldtuple">TypingRule.LDTuple</a><ul><li><a href="#rule_40">Rule</a></li><li><a href="#example_40">Example</a></li></ul></li><li><a href="#typingrule.ldtypedtuple">TypingRule.LDTypedTuple</a><ul><li><a href="#rule_41">Rule</a></li><li><a href="#example_41">Example</a></li></ul></li></ul></li><li><a href="#typing-of-statements">Typing of Statements</a><ul><li><a href="#typingrule.spass">TypingRule.SPass</a><ul><li><a href="#rule_42">Rule</a></li><li><a href="#example_42">Example</a></li></ul></li><li><a href="#typingrule.sassign">TypingRule.SAssign</a><ul><li><a href="#rule_43">Rule</a></li><li><a href="#example_43">Example</a></li></ul></li><li><a href="#typingrule.sreturnnone">TypingRule.SReturnNone</a><ul><li><a href="#rule_44">Rule</a></li><li><a href="#example_44">Example</a></li></ul></li><li><a href="#typingrule.sreturnone">TypingRule.SReturnOne</a><ul><li><a href="#rule_45">Rule</a></li><li><a href="#example_45">Example</a></li></ul></li><li><a href="#typingrule.sreturnsome">TypingRule.SReturnSome</a><ul><li><a href="#rule_46">Rule</a></li><li><a href="#example_46">Example</a></li></ul></li><li><a href="#typingrule.sthen">TypingRule.SThen</a><ul><li><a href="#rule_47">Rule</a></li><li><a href="#example_47">Example</a></li></ul></li><li><a href="#typingrule.scall">TypingRule.SCall</a><ul><li><a href="#rule_48">Rule</a></li><li><a href="#example_48">Example</a></li></ul></li><li><a href="#typingrule.scond">TypingRule.SCond</a><ul><li><a href="#rule_49">Rule</a></li><li><a href="#example_49">Example</a></li></ul></li><li><a href="#typingrule.scase">TypingRule.SCase</a><ul><li><a href="#rule_50">Rule</a></li><li><a href="#example_50">Example</a></li></ul></li><li><a href="#typingrule.sassert">TypingRule.SAssert</a><ul><li><a href="#rule_51">Rule</a></li><li><a href="#example_51">Example</a></li></ul></li><li><a href="#typingrule.swhile">TypingRule.SWhile</a><ul><li><a href="#rule_52">Rule</a></li><li><a href="#example_52">Example</a></li></ul></li><li><a href="#typingrule.srepeat">TypingRule.SRepeat</a><ul><li><a href="#rule_53">Rule</a></li><li><a href="#example_53">Example</a></li></ul></li><li><a href="#typingrule.sfor">TypingRule.SFor</a><ul><li><a href="#rule_54">Rule</a></li><li><a href="#example_54">Example</a></li></ul></li><li><a href="#typingrule.sthrownone">TypingRule.SThrowNone</a><ul><li><a href="#rule_55">Rule</a></li><li><a href="#example_55">Example</a></li></ul></li><li><a href="#typingrule.sthrowsome">TypingRule.SThrowSome</a><ul><li><a href="#rule_56">Rule</a></li><li><a href="#example_56">Example</a></li></ul></li><li><a href="#typingrule.stry">TypingRule.STry</a><ul><li><a href="#rule_57">Rule</a></li><li><a href="#example_57">Example</a></li></ul></li><li><a href="#typingrule.sdeclsome">TypingRule.SDeclSome</a><ul><li><a href="#rule_58">Rule</a></li><li><a href="#example_58">Example</a></li></ul></li><li><a href="#typingrule.sdeclnone">TypingRule.SDeclNone</a><ul><li><a href="#rule_59">Rule</a></li><li><a href="#example_59">Example</a></li></ul></li><li><a href="#typingrule.sdebug">TypingRule.SDebug</a><ul><li><a href="#rule_60">Rule</a></li><li><a href="#example_60">Example</a></li></ul></li></ul></li><li><a href="#typing-of-slices">Typing of Slices</a><ul><li><a href="#typingrule.slicelength">TypingRule.SliceLength</a><ul><li><a href="#rule_61">Rule</a></li><li><a href="#example_61">Example</a></li></ul></li><li><a href="#typingrule.slicesingle">TypingRule.SliceSingle</a><ul><li><a href="#rule_62">Rule</a></li><li><a href="#example_62">Example</a></li></ul></li><li><a href="#typingrule.slicerange">TypingRule.SliceRange</a><ul><li><a href="#rule_63">Rule</a></li><li><a href="#example_63">Example</a></li></ul></li><li><a href="#typingrule.slicestar">TypingRule.SliceStar</a><ul><li><a href="#rule_64">Rule</a></li><li><a href="#example_64">Example</a></li></ul></li></ul></li><li><a href="#typing-of-patterns">Typing of Patterns</a><ul><li><a href="#typingrule.pall">TypingRule.PAll</a><ul><li><a href="#rule_65">Rule</a></li><li><a href="#example_65">Example</a></li></ul></li><li><a href="#typingrule.pany">TypingRule.PAny</a><ul><li><a href="#rule_66">Rule</a></li><li><a href="#example_66">Example</a></li></ul></li><li><a href="#typingrule.pnot">TypingRule.PNot</a><ul><li><a href="#rule_67">Rule</a></li><li><a href="#example_67">Example</a></li></ul></li><li><a href="#typingrule.psingle">TypingRule.PSingle</a><ul><li><a href="#rule_68">Rule</a></li><li><a href="#example_68">Example</a></li></ul></li><li><a href="#typingrule.pgeq">TypingRule.PGeq</a><ul><li><a href="#rule_69">Rule</a></li><li><a href="#example_69">Example</a></li></ul></li><li><a href="#typingrule.pleq">TypingRule.PLeq</a><ul><li><a href="#rule_70">Rule</a></li><li><a href="#example_70">Example</a></li></ul></li><li><a href="#typingrule.prange">TypingRule.PRange</a><ul><li><a href="#rule_71">Rule</a></li><li><a href="#example_71">Example</a></li></ul></li><li><a href="#typingrule.pmask">TypingRule.PMask</a><ul><li><a href="#rule_72">Rule</a></li><li><a href="#example_72">Example</a></li></ul></li><li><a href="#typingrule.ptuple">TypingRule.PTuple</a><ul><li><a href="#rule_73">Rule</a></li><li><a href="#example_73">Example</a></li></ul></li></ul></li><li><a href="#typing-of-blocks">Typing of Blocks</a><ul><li><a href="#typingrule.block">TypingRule.Block</a><ul><li><a href="#rule_74">Rule</a></li><li><a href="#example_74">Example</a></li></ul></li></ul></li><li><a href="#typing-of-catchers">Typing of Catchers</a><ul><li><a href="#typingrule.catcher">TypingRule.Catcher</a><ul><li><a href="#rule_75">Rule</a></li><li><a href="#example_75">Example</a></li></ul></li></ul></li><li><a href="#typing-of-function-calls">Typing of Function Calls</a><ul><li><a href="#typingrule.fcall">TypingRule.FCall</a><ul><li><a href="#rule_76">Rule</a></li><li><a href="#example_76">Example</a></li></ul></li></ul></li><li><a href="#typing-of-functions">Typing of Functions</a><ul><li><a href="#typingrule.func">TypingRule.Func</a><ul><li><a href="#rule_77">Rule</a></li><li><a href="#example_77">Example</a></li></ul></li></ul></li></ul></li></ul></nav><div class="odoc-content"><h2 id="disclaimer"><a href="#disclaimer" class="anchor"></a>Disclaimer</h2><p>This material covers both ASLv0 (viz, the existing ASL pseudocode language which appears in the Arm Architecture Reference Manual) and ASLv1, a new, experimental, and as yet unreleased version of ASL.</p><p>This material is work in progress, more precisely at pre-Alpha quality as per Armâ€™s quality standards. In particular, this means that it would be premature to base any production tool development on this material.</p><p>However, any feedback, question, query and feature request would be most welcome; those can be sent to Armâ€™s Architecture Formal Team Lead Jade Alglave &lt;jade.alglave@arm.com&gt; or by raising issues or PRs to the herdtools7 github repository.</p><h2 id="typing"><a href="#typing" class="anchor"></a>Typing</h2><p>Typing a program is typing its main function. Constructively, typing a program requires following its Abstract Syntax Tree and typing each of its components.</p><p>Formally, the types of a program are given by applying a set of annotate_&lt;object&gt; functions. Each annotate_&lt;object&gt; function describes how to annotate a specific object, as follows.</p><ul><li><code>annotate_expr</code> annotates expressions;</li><li><code>annotate_slices</code> annotates slices;</li><li><code>annotate_pattern</code> annotates pattern;</li><li><code>annotate_local_decl_item</code> annotates local declarations;</li><li><code>annotate_lexpr</code> annotates left-hand sides of assignments;</li><li><code>annotate_stmt</code> annotates statements;</li><li><code>annotate_block</code> annotates blocks;</li><li><code>annotate_catcher</code> annotates catchers;</li><li><code>annotate_call</code> annotates functions calls;</li><li><code>annotate_func</code> annotates functions.</li></ul><h3 id="checking-compatibility-of-operators"><a href="#checking-compatibility-of-operators" class="anchor"></a>Checking Compatibility of operators</h3><ul><li><code>check_binop op t1 t2</code> checks that the types <code>t1</code> and <code>t2</code> are valid for the operation <code>op</code>, as is defined in chapter 7 of the Language Reference Manual.</li></ul><ul><li><code>check_unop op t</code> checks that the type <code>t</code> is valid for the operation <code>op</code>, as defined in chapter 7 of the Language Reference Manual.</li></ul><h3 id="typing-of-expressions"><a href="#typing-of-expressions" class="anchor"></a>Typing of Expressions</h3><p><code>annotate_expr</code> specifies how to annotate an expression <code>e</code> in an environment <code>env</code>. Formally, the result of annotating the expression <code>e</code> in <code>env</code> is <code>t,new_e</code> and one of the following applies:</p><h4 id="typingrule.lit"><a href="#typingrule.lit" class="anchor"></a>TypingRule.Lit</h4><h5 id="rule"><a href="#rule" class="anchor"></a>Rule</h5><p>All of the following applies:</p><ul><li><code>e</code> is a Literal <code>v</code>;</li><li><code>t</code> is the type of <code>v</code>;</li><li><code>new_e</code> is <code>e</code>.</li></ul><h5 id="example"><a href="#example" class="anchor"></a>Example</h5><h4 id="typingrule.typedexpr"><a href="#typingrule.typedexpr" class="anchor"></a>TypingRule.TypedExpr</h4><h5 id="rule_2"><a href="#rule_2" class="anchor"></a>Rule</h5><p>All of the following applies:</p><ul><li><code>e</code> is a typed expression <code>(e',t')</code>;</li><li><code>t'',e''</code> is the result of annotating <code>e'</code> in <code>env</code>;</li><li>One of the following applies:</li><li>All of the following applies:</li><li><code>t''</code> is a structural subtype of <code>t'</code> in <code>env</code>;</li><li><code>t''</code> is a domain subtype of <code>t'</code> in <code>env</code>;</li><li><code>t</code> is <code>t'</code>;</li><li><code>new_e</code> is <code>e''</code>.</li><li>All of the following applies:</li><li><code>t''</code> is a structural subtype of <code>t'</code> in <code>env</code>;</li><li><code>t''</code> is not a domain subtype of <code>t'</code> in <code>env</code>;</li><li>an execution-time check that the expression evaluates to a value in the domain of the required type is required.</li><li>All of the following applies:</li><li><code>t''</code> is not a structural subtype of <code>t'</code> in <code>env</code>;</li><li>a &quot;ConflictingTypes&quot; error is raised.</li></ul><h5 id="example_2"><a href="#example_2" class="anchor"></a>Example</h5><h4 id="typingrule.elocalvarconstant"><a href="#typingrule.elocalvarconstant" class="anchor"></a>TypingRule.ELocalVarConstant</h4><h5 id="rule_3"><a href="#rule_3" class="anchor"></a>Rule</h5><p>All of the following applies:</p><ul><li><code>e</code> is a variable <code>x</code>;</li><li><code>x</code> maps to a type <code>ty</code> in the <code>storage_types</code> of the local environment given by <code>env</code>;</li><li><code>x</code> maps to a local constant <code>v</code>;</li><li><code>t</code> is <code>ty</code>;</li><li><code>new_e</code> is the Literal <code>v</code>.</li></ul><h5 id="example_3"><a href="#example_3" class="anchor"></a>Example</h5><h4 id="typingrule.elocalvar"><a href="#typingrule.elocalvar" class="anchor"></a>TypingRule.ELocalVar</h4><h5 id="rule_4"><a href="#rule_4" class="anchor"></a>Rule</h5><p>All of the following applies:</p><ul><li><code>e</code> is a variable <code>x</code>;</li><li><code>x</code> maps to a type <code>ty</code> in the <code>storage_types</code> of the local environment given by <code>env</code>;</li><li><code>x</code> does not map to a local constant;</li><li><code>t</code> is <code>ty</code>;</li><li><code>new_e</code> is <code>e</code>.</li></ul><h5 id="example_4"><a href="#example_4" class="anchor"></a>Example</h5><h4 id="typingrule.eglobalvarconstantval"><a href="#typingrule.eglobalvarconstantval" class="anchor"></a>TypingRule.EGlobalVarConstantVal</h4><h5 id="rule_5"><a href="#rule_5" class="anchor"></a>Rule</h5><p>All of the following applies:</p><ul><li><code>e</code> is a variable <code>x</code>;</li><li><code>x</code> maps to a type <code>ty</code> in the <code>constant_values</code> of the global environment given by <code>env</code>;</li><li><code>x</code> maps to a global constant;</li><li><code>x</code> maps to a value <code>v</code>;</li><li><code>t</code> is <code>ty</code>;</li><li><code>new_e</code> is <code>E_Literal v</code>.</li></ul><h5 id="example_5"><a href="#example_5" class="anchor"></a>Example</h5><h4 id="typingrule.eglobalvar"><a href="#typingrule.eglobalvar" class="anchor"></a>TypingRule.EGlobalVar</h4><h5 id="rule_6"><a href="#rule_6" class="anchor"></a>Rule</h5><p>All of the following applies:</p><ul><li><code>e</code> is a variable <code>x</code>;</li><li><code>x</code> maps to a type <code>ty</code> in the <code>constant_values</code> of the global environment given by <code>env</code>;</li><li><code>x</code> does not map to a global constant;</li><li><code>t</code> is <code>ty</code>;</li><li><code>new_e</code> is <code>e</code>.</li></ul><h5 id="example_6"><a href="#example_6" class="anchor"></a>Example</h5><h4 id="typingrule.eundefident"><a href="#typingrule.eundefident" class="anchor"></a>TypingRule.EUndefIdent</h4><h5 id="rule_7"><a href="#rule_7" class="anchor"></a>Rule</h5><p>All of the following applies:</p><ul><li><code>e</code> is a variable <code>x</code>;</li><li><code>x</code> is not bound in <code>env</code>;</li><li>an error &quot;Undefined Identifier&quot; is raised.</li></ul><h5 id="example_7"><a href="#example_7" class="anchor"></a>Example</h5><h4 id="typingrule.binop"><a href="#typingrule.binop" class="anchor"></a>TypingRule.Binop</h4><h5 id="rule_8"><a href="#rule_8" class="anchor"></a>Rule</h5><p>All of the following applies:</p><ul><li><code>e</code> denotes a binary operation <code>op</code> over two expressions <code>e1</code> and <code>e2</code>;</li><li><code>t1,e1'</code> is the result of annotating <code>e1</code> in <code>env</code>;</li><li><code>t2,e2'</code> is the result of annotating <code>e2</code> in <code>env</code>;</li><li><code>t</code> is the result of checking compatibility of <code>op</code> with <code>t1</code> and <code>t2</code>;</li><li><code>new_e</code> denotes <code>op</code> over <code>e1'</code> and <code>e2'</code>.</li></ul><h5 id="example_8"><a href="#example_8" class="anchor"></a>Example</h5><h4 id="typingrule.unop"><a href="#typingrule.unop" class="anchor"></a>TypingRule.Unop</h4><h5 id="rule_9"><a href="#rule_9" class="anchor"></a>Rule</h5><p>All of the following applies:</p><ul><li><code>e</code> denotes a unary operation <code>op</code> over an expression <code>e'</code>;</li><li><code>t'',e''</code> is the result of annotating <code>e'</code> in <code>env</code>;</li><li><code>t</code> is the result of checking compatibility of <code>op</code> with <code>t''</code>;</li><li><code>new_e</code> denotes <code>op</code> over <code>e''</code>.</li></ul><h5 id="example_9"><a href="#example_9" class="anchor"></a>Example</h5><h4 id="typingrule.econd"><a href="#typingrule.econd" class="anchor"></a>TypingRule.ECond</h4><h5 id="rule_10"><a href="#rule_10" class="anchor"></a>Rule</h5><p>All of the following applies:</p><ul><li><code>e</code> denotes a condition <code>e_cond</code> with two options <code>e_true</code> and <code>e_false</code>;</li><li><code>t_cond, e'_cond</code> is the result of annotating <code>e_cond</code> in <code>env</code>;</li><li><code>t_true, e'_true</code> is the result of annotating <code>e_true</code> in <code>env</code>;</li><li><code>t_false, e'_false</code> is the result of annotating <code>e_false</code> in <code>env</code>;</li><li>One of the following applies:</li><li>All of the following applies:</li><li><code>t</code> is the lowest common ancestor of <code>t_true</code> and <code>t_false</code>;</li><li><code>new_e</code> is the condition <code>e'_cond</code> with two options <code>e'_true</code> and <code>e'_false</code>.</li><li>All of the following applies:</li><li>there is no lowest common ancestor of <code>t_true</code> and <code>t_false</code>;</li><li>an error &quot;Unreconciliable Types&quot; is raised.</li></ul><h5 id="example_10"><a href="#example_10" class="anchor"></a>Example</h5><h4 id="typingrule.etuple"><a href="#typingrule.etuple" class="anchor"></a>TypingRule.ETuple</h4><h5 id="rule_11"><a href="#rule_11" class="anchor"></a>Rule</h5><p>All of the following applies:</p><ul><li><code>e</code> denotes a tuple <code>li</code>;</li><li><code>ts, es</code> is the result of annotating in <code>env</code> each expression in <code>li</code>;</li><li><code>t</code> is <code>ts</code>;</li><li><code>new_e</code> is <code>es</code>.</li></ul><h5 id="example_11"><a href="#example_11" class="anchor"></a>Example</h5><h4 id="typingrule.econcatempty"><a href="#typingrule.econcatempty" class="anchor"></a>TypingRule.EConcatEmpty</h4><h5 id="rule_12"><a href="#rule_12" class="anchor"></a>Rule</h5><p>All of the following applies:</p><ul><li><code>e</code> denotes the empty concatenation;</li><li><code>t</code> is <code>bits(0)</code>;</li><li><code>new_e</code> is <code>e</code>.</li></ul><h5 id="example_12"><a href="#example_12" class="anchor"></a>Example</h5><h4 id="typingrule.econcat"><a href="#typingrule.econcat" class="anchor"></a>TypingRule.EConcat</h4><h5 id="rule_13"><a href="#rule_13" class="anchor"></a>Rule</h5><p>All of the following applies:</p><ul><li><code>e</code> denotes the concatenation of a non-empty list of expressions <code>li</code>;</li><li><code>ts, es</code> is the result of annotating <code>li</code> in <code>env</code>;</li><li><code>w</code> is the sum of the widths of the bitvector types <code>ts</code>;</li><li><code>t</code> is <code>bits(w)</code>;</li><li><code>new_e</code> is <code>es</code>.</li></ul><h5 id="example_13"><a href="#example_13" class="anchor"></a>Example</h5><h4 id="typingrule.erecordnotarecord"><a href="#typingrule.erecordnotarecord" class="anchor"></a>TypingRule.ERecordNotARecord</h4><h5 id="rule_14"><a href="#rule_14" class="anchor"></a>Rule</h5><p>All of the following applies:</p><ul><li><code>e</code> denotes the record expression of type <code>ty</code> with fields <code>fields</code>;</li><li><code>ty</code> is neither a record nor an exception type;</li><li>an error &quot;Conflicting Types&quot; is raised.</li></ul><h5 id="example_14"><a href="#example_14" class="anchor"></a>Example</h5><h4 id="typingrule.erecordmissingfield"><a href="#typingrule.erecordmissingfield" class="anchor"></a>TypingRule.ERecordMissingField</h4><h5 id="rule_15"><a href="#rule_15" class="anchor"></a>Rule</h5><p>All of the following applies:</p><ul><li><code>e</code> denotes the record expression of type <code>ty</code> with fields <code>fields</code>;</li><li><code>ty</code> is the name of a record type with fields <code>field_types</code>;</li><li>one field in <code>field_types</code> is not initialised by <code>fields</code>;</li><li>an error &quot;Bad Fields&quot; is raised.</li></ul><h5 id="example_15"><a href="#example_15" class="anchor"></a>Example</h5><h4 id="typingrule.erecord"><a href="#typingrule.erecord" class="anchor"></a>TypingRule.ERecord</h4><h5 id="rule_16"><a href="#rule_16" class="anchor"></a>Rule</h5><p>All of the following applies:</p><ul><li><code>e</code> denotes the record expression of type <code>ty</code> with fields <code>fields</code>;</li><li><code>ty</code> is the name of a record type with fields <code>field_types</code>;</li><li>For each field named <code>name</code> associated with the expression <code>e'</code> in <code>field_types</code>, all of the following applies:</li><li><code>t',e''</code> is the result of annotating <code>e'</code> in <code>env</code>;</li><li><code>t_spec'</code> is the type associated to <code>name</code> in <code>field_types</code>;</li><li><code>t'</code> type-satisfies <code>t_spec'</code>;</li><li><code>fields'</code> associates <code>name</code> to <code>e''</code>;</li><li><code>t</code> is <code>ty</code>;</li><li><code>new_e</code> is the record expression of type <code>ty</code> with fields <code>fields'</code>.</li></ul><h5 id="example_16"><a href="#example_16" class="anchor"></a>Example</h5><h4 id="typingrule.ecall"><a href="#typingrule.ecall" class="anchor"></a>TypingRule.ECall</h4><h5 id="rule_17"><a href="#rule_17" class="anchor"></a>Rule</h5><p>All of the following applies:</p><ul><li><code>e</code> denotes a call to a function named <code>name</code> with arguments <code>args</code> and parameters <code>eqs</code>;</li><li><code>name', args', eqs', ty</code> is the result of annotating the call of that function in <code>env</code>;</li><li><code>t</code> is <code>ty</code>;</li><li><code>new_e</code> is the call the function named <code>name'</code> with arguments <code>args'</code> and parameters <code>eqs'</code>.</li></ul><h5 id="example_17"><a href="#example_17" class="anchor"></a>Example</h5><h4 id="typingrule.eunknown"><a href="#typingrule.eunknown" class="anchor"></a>TypingRule.EUnknown</h4><h5 id="rule_18"><a href="#rule_18" class="anchor"></a>Rule</h5><p>All of the following applies:</p><ul><li><code>e</code> denotes an unknown expression of type <code>ty</code>;</li><li><code>ty'</code> is the structure of <code>ty</code> in <code>env</code>;</li><li><code>t</code> is <code>ty</code>;</li><li><code>new_e</code> is an unknown expression of type <code>ty'</code>.</li></ul><h5 id="example_18"><a href="#example_18" class="anchor"></a>Example</h5><h4 id="typingrule.eslice"><a href="#typingrule.eslice" class="anchor"></a>TypingRule.ESlice</h4><h5 id="rule_19"><a href="#rule_19" class="anchor"></a>Rule</h5><p>All of the following applies:</p><ul><li><code>e</code> denotes the slicing of expression <code>e'</code> by the slices <code>slices</code>;</li><li><code>t_e',e'</code> is the result of annotating the expression <code>e'</code> in <code>env</code>;</li><li><code>t_e'</code> has the structure of an integer or a bitvector;</li><li><code>w</code> is the width of <code>slices</code>;</li><li><code>slices'</code> is the result of annotating <code>slices</code> in <code>env</code>;</li><li><code>t</code> is the bitvector type of width <code>w</code>;</li><li><code>new_e</code> is the slicing of expression <code>e'</code> by the slices <code>slices'</code>.</li></ul><h5 id="example_19"><a href="#example_19" class="anchor"></a>Example</h5><h4 id="typingrule.egetarray"><a href="#typingrule.egetarray" class="anchor"></a>TypingRule.EGetArray</h4><h5 id="rule_20"><a href="#rule_20" class="anchor"></a>Rule</h5><p>All of the following applies:</p><ul><li><code>e</code> denotes the slicing of expression <code>e'</code> by the slices <code>slices</code>;</li><li><code>t_e',e'</code> is the result of annotating the expression <code>e'</code> in <code>env</code>;</li><li><code>t_e'</code> has the structure of an array of size <code>size</code> and type <code>t</code>;</li><li>One of the following applies:</li><li><code>wanted_t_index</code> is an enumeration type of name <code>size</code>;</li><li><code>wanted_t_index</code> is the type <code>integer {0..size-1}</code>;</li><li><code>slices</code> is single expression <code>e_index</code>;</li><li><code>t_index', e_index'</code> is the result of annotating <code>e_index</code> in <code>env</code>;</li><li><code>t_index'</code> type-satisfies <code>wanted_t_index</code>;</li><li><code>new_e</code> is an access to array <code>e'</code> at index <code>e_index'</code>.</li></ul><h5 id="example_20"><a href="#example_20" class="anchor"></a>Example</h5><h4 id="typingrule.egetrecordfield"><a href="#typingrule.egetrecordfield" class="anchor"></a>TypingRule.EGetRecordField</h4><h5 id="rule_21"><a href="#rule_21" class="anchor"></a>Rule</h5><p>All of the following applies:</p><ul><li><code>e</code> denotes the access of field <code>field_name</code> on expression <code>e1</code>;</li><li><code>t_e1, e2</code> is the result of annotating <code>e1</code> in <code>env</code>;</li><li><code>t_e2</code> is the anonymous type corresponding to <code>t_e1</code> in <code>env</code>;</li><li><code>t_e2</code> is an Exception or a Record type with fields <code>fields</code>;</li><li>One of the following applies:</li><li>All of the following applies:</li><li><code>field_name</code> is not declared in <code>fields</code>;</li><li>an error &quot;Bad Field&quot; is raised.</li><li>All of the following applies:</li><li><code>field_name</code> is declared in <code>fields</code>;</li><li><code>t</code> is the type corresponding to <code>field_name</code> in <code>fields</code>;</li><li><code>new_e</code> is the access of field <code>field_name</code> on expression <code>e2</code>.</li></ul><h5 id="example_21"><a href="#example_21" class="anchor"></a>Example</h5><h4 id="typingrule.egetbadbitfield"><a href="#typingrule.egetbadbitfield" class="anchor"></a>TypingRule.EGetBadBitField</h4><h5 id="rule_22"><a href="#rule_22" class="anchor"></a>Rule</h5><p>All of the following applies:</p><ul><li><code>e</code> denotes the access of field <code>field_name</code> on expression <code>e1</code>;</li><li><code>t_e1, e2</code> is the result of annotating <code>e1</code> in <code>env</code>;</li><li><code>t_e2</code> is the anonymous type corresponding to <code>t_e1</code> in <code>env</code>;</li><li><code>t_e2</code> is a bitvector type with bitfields <code>bitfields</code>;</li><li><code>field_name</code> is not declared in <code>bitfields</code>;</li><li>an error &quot;Bad Field&quot; is raised.</li></ul><h5 id="example_22"><a href="#example_22" class="anchor"></a>Example</h5><h4 id="typingrule.egetbitfield"><a href="#typingrule.egetbitfield" class="anchor"></a>TypingRule.EGetBitField</h4><h5 id="rule_23"><a href="#rule_23" class="anchor"></a>Rule</h5><p>All of the following applies:</p><ul><li><code>e</code> denotes the access of field <code>field_name</code> on expression <code>e1</code>;</li><li><code>t_e1, e2</code> is the result of annotating <code>e1</code> in <code>env</code>;</li><li><code>t_e2</code> is the anonymous type corresponding to <code>t_e1</code> in <code>env</code>;</li><li><code>t_e2</code> is a bitvector type with bitfields <code>bitfields</code>;</li><li><code>field_name</code> is declared in <code>bitfields</code>;</li><li><code>slices</code> gives the slices corresponding to the bitfield <code>field_name</code> in <code>bitfields</code>;</li><li><code>e3</code> denotes the slicing of the expression <code>e2</code> by the slices <code>slices</code>;</li><li><code>t,new_e</code> is the result of annotating <code>e3</code>.</li></ul><h5 id="example_23"><a href="#example_23" class="anchor"></a>Example</h5><h4 id="typingrule.egetbitfieldnested"><a href="#typingrule.egetbitfieldnested" class="anchor"></a>TypingRule.EGetBitFieldNested</h4><h5 id="rule_24"><a href="#rule_24" class="anchor"></a>Rule</h5><p>All of the following applies:</p><ul><li><code>e</code> denotes the access of field <code>field_name</code> on expression <code>e1</code>;</li><li><code>t_e1, e2</code> is the result of annotating <code>e1</code> in <code>env</code>;</li><li><code>t_e2</code> is the anonymous type corresponding to <code>t_e1</code> in <code>env</code>;</li><li><code>t_e2</code> is a bitvector type with bitfields <code>bitfields</code>;</li><li><code>field_name</code> is declared in <code>bitfields</code>;</li><li><code>slices</code> gives the slices corresponding to the bitfield <code>field_name</code> in <code>bitfields</code>;</li><li><code>e3</code> denotes the slicing of the expression <code>e2</code> by the slices <code>slices</code>;</li><li><code>t4, e4</code> is the result of annotating <code>e3</code> in <code>env</code>;</li><li><code>bitfields'</code> gives the bitfields corresponding to the bitfield <code>field_name</code> in <code>bitfields</code>;</li><li><code>t</code> is the bitvector type with the width of <code>t4</code> and the bitfields <code>bitfields'</code></li><li><code>new_e</code> is <code>e4</code>.</li></ul><h5 id="example_24"><a href="#example_24" class="anchor"></a>Example</h5><h4 id="typingrule.egetbitfieldtyped"><a href="#typingrule.egetbitfieldtyped" class="anchor"></a>TypingRule.EGetBitFieldTyped</h4><h5 id="rule_25"><a href="#rule_25" class="anchor"></a>Rule</h5><p>All of the following applies:</p><ul><li><code>e</code> denotes <code>e1, field_name</code>;</li><li><code>t_e1, e2</code> is the result of annotating <code>e1</code> in <code>env</code>;</li><li><code>t_e2</code> is the anonymous type corresponding to <code>t_e1</code> in <code>env</code>;</li><li><code>t_e2</code> is a bitvector type with bitfields <code>bitfields</code>;</li><li><code>field_name</code> is declared in <code>bitfields</code>;</li><li><code>slices</code> gives the slices corresponding to the bitfield <code>field_name</code> in <code>bitfields</code>;</li><li><code>t_e3,e3</code> is the result of annotating <code>e2,slices</code> in <code>env</code>;</li><li><code>t</code> gives the type corresponding to the bitfield <code>field_name</code> in <code>bitfields</code>;</li><li><code>t_e3</code> type-satisfies <code>t</code> in <code>env</code>;</li><li><code>new_e</code> is <code>e3</code>.</li></ul><h5 id="example_25"><a href="#example_25" class="anchor"></a>Example</h5><h4 id="typingrule.egetbitfields"><a href="#typingrule.egetbitfields" class="anchor"></a>TypingRule.EGetBitFields</h4><h5 id="rule_26"><a href="#rule_26" class="anchor"></a>Rule</h5><p>&lt;description&gt;</p><h5 id="example_26"><a href="#example_26" class="anchor"></a>Example</h5><p>&lt;minimal example&gt;</p><h4 id="typingrule.epattern"><a href="#typingrule.epattern" class="anchor"></a>TypingRule.EPattern</h4><h5 id="rule_27"><a href="#rule_27" class="anchor"></a>Rule</h5><p>All of the following applies:</p><ul><li><code>e</code> denotes whether the expression <code>e'</code> matches <code>patterns</code>;</li><li><code>t_e', e''</code> is the result of annotating <code>e'</code> in <code>env</code>;</li><li><code>patterns'</code> is the result of annotating <code>patterns</code> in <code>env</code>;</li><li><code>t</code> is <code>boolean</code>;</li><li><code>new_e</code> denotes whether the expression <code>e''</code> matches <code>patterns'</code>.</li></ul><h5 id="example_27"><a href="#example_27" class="anchor"></a>Example</h5><h3 id="typing-of-left-hand-side-expressions"><a href="#typing-of-left-hand-side-expressions" class="anchor"></a>Typing of Left-Hand-Side Expressions</h3><p><code>annotate_lexpr version env le t_e</code> is <code>new_le</code> and one of the following applies:</p><h4 id="typingrule.leignore"><a href="#typingrule.leignore" class="anchor"></a>TypingRule.LEIgnore</h4><h5 id="rule_28"><a href="#rule_28" class="anchor"></a>Rule</h5><p>All of the following applies:</p><ul><li><code>le</code> denotes an expression which can be ignored;</li><li><code>new_le</code> is <code>le</code>.</li></ul><h5 id="example_28"><a href="#example_28" class="anchor"></a>Example</h5><h4 id="typingrule.lelocalvar"><a href="#typingrule.lelocalvar" class="anchor"></a>TypingRule.LELocalVar</h4><h5 id="rule_29"><a href="#rule_29" class="anchor"></a>Rule</h5><p>All of the following applies:</p><ul><li><code>le</code> denotes a local variable <code>x</code> of type <code>ty</code>;</li><li><code>x</code> is locally declared as a variable of type <code>ty</code> in <code>env</code>;</li><li><code>new_le</code> is <code>le</code>.</li></ul><h5 id="example_29"><a href="#example_29" class="anchor"></a>Example</h5><h4 id="typingrule.leglobalvar"><a href="#typingrule.leglobalvar" class="anchor"></a>TypingRule.LEGlobalVar</h4><h5 id="rule_30"><a href="#rule_30" class="anchor"></a>Rule</h5><h5 id="example_30"><a href="#example_30" class="anchor"></a>Example</h5><h4 id="typingrule.letuple"><a href="#typingrule.letuple" class="anchor"></a>TypingRule.LETuple</h4><h5 id="rule_31"><a href="#rule_31" class="anchor"></a>Rule</h5><p>All of the following applies:</p><ul><li><code>le</code> denotes a tuple <code>les</code>;</li><li><code>t_e</code> denotes a tuple type <code>sub_tys</code>;</li><li>One of the following applies:</li><li>All of the following applies:</li><li><code>les</code> and <code>sub_tys</code> have the same length;</li><li><code>new_le</code> is the result of annotating <code>les</code> with <code>sub_tys</code> in <code>env</code></li><li>All of the following applies:</li><li><code>les</code> and <code>sub_tys</code> do not have the same length;</li><li>an error &quot;Bad Arity Tuple Unpacking&quot; is raised.</li></ul><h5 id="example_31"><a href="#example_31" class="anchor"></a>Example</h5><h4 id="typingrule.leslice"><a href="#typingrule.leslice" class="anchor"></a>TypingRule.LESlice</h4><h5 id="rule_32"><a href="#rule_32" class="anchor"></a>Rule</h5><h5 id="example_32"><a href="#example_32" class="anchor"></a>Example</h5><h4 id="typingrule.lesetarray"><a href="#typingrule.lesetarray" class="anchor"></a>TypingRule.LESetArray</h4><h5 id="rule_33"><a href="#rule_33" class="anchor"></a>Rule</h5><h5 id="example_33"><a href="#example_33" class="anchor"></a>Example</h5><h4 id="typingrule.lesetfield"><a href="#typingrule.lesetfield" class="anchor"></a>TypingRule.LESetField</h4><h5 id="rule_34"><a href="#rule_34" class="anchor"></a>Rule</h5><h5 id="example_34"><a href="#example_34" class="anchor"></a>Example</h5><h4 id="typingrule.lesetfields"><a href="#typingrule.lesetfields" class="anchor"></a>TypingRule.LESetFields</h4><h5 id="rule_35"><a href="#rule_35" class="anchor"></a>Rule</h5><p>&lt;description&gt;</p><h5 id="example_35"><a href="#example_35" class="anchor"></a>Example</h5><p>&lt;minimal example&gt;</p><h3 id="typing-of-local-declarations"><a href="#typing-of-local-declarations" class="anchor"></a>Typing of Local Declarations</h3><p><code>annotate_local_decl_item loc env ty ldk ldi</code> is <code>new_env, new_ldi</code> and one of the following applies:</p><h4 id="typingrule.ldignorenone"><a href="#typingrule.ldignorenone" class="anchor"></a>TypingRule.LDIgnoreNone</h4><h5 id="rule_36"><a href="#rule_36" class="anchor"></a>Rule</h5><p>All of the following applies:</p><ul><li><code>ldi</code> is a local declaration which can be ignored;</li><li>no type is given;</li><li><code>new_env</code> is <code>env</code>;</li><li><code>new_ldi</code> is <code>ldi</code>.</li></ul><h5 id="example_36"><a href="#example_36" class="anchor"></a>Example</h5><h4 id="typingrule.ldignoresome"><a href="#typingrule.ldignoresome" class="anchor"></a>TypingRule.LDIgnoreSome</h4><h5 id="rule_37"><a href="#rule_37" class="anchor"></a>Rule</h5><p>All of the following applies:</p><ul><li><code>ldi</code> is a local declaration which can be ignored;</li><li>a type <code>t</code> is given;</li><li>One of the following applies:</li><li>All of the following applies:</li><li><code>t</code> can be initialised with <code>ty</code> in <code>env</code>;</li><li><code>new_env</code> is <code>env</code>;</li><li><code>new_ldi</code> is <code>ldi</code>.</li><li>All of the following applies:</li><li><code>t</code> cannot be initialised with <code>ty</code> in <code>env</code>;</li><li>an error &quot;Conflicting Types&quot; is raised.</li></ul><h5 id="example_37"><a href="#example_37" class="anchor"></a>Example</h5><h4 id="typingrule.ldvar"><a href="#typingrule.ldvar" class="anchor"></a>TypingRule.LDVar</h4><h5 id="rule_38"><a href="#rule_38" class="anchor"></a>Rule</h5><p>All of the following applies:</p><ul><li><code>ldi</code> denotes a variable <code>x</code> with an optional type <code>ty_opt</code>;</li><li><code>x</code> is not declared in <code>env</code>;</li><li>One of the following applies:</li><li>All of the following applies:</li><li><code>ty_opt</code> is <code>None</code>;</li><li><code>t</code> is <code>ty</code></li><li>All of the following applies:</li><li><code>ty_opt</code> is <code>Some t</code>;</li><li><code>t</code> can be initialized with <code>ty</code> in <code>env</code>;</li><li><code>new_env</code> is <code>env</code> modified so that <code>x</code> is locally declared of type <code>t</code>;</li><li><code>new_ldi</code> is the declaration of variable <code>x</code> with type <code>t</code>.</li></ul><h5 id="example_38"><a href="#example_38" class="anchor"></a>Example</h5><h4 id="typingrule.lduninitialisedtypedtuple"><a href="#typingrule.lduninitialisedtypedtuple" class="anchor"></a>TypingRule.LDUninitialisedTypedTuple</h4><h5 id="rule_39"><a href="#rule_39" class="anchor"></a>Rule</h5><p>All of the following applies:</p><ul><li><code>ldi</code> denotes a singleton list <code>ld</code>;</li><li><code>new_env, new_ldi</code> is the result of annotating the local declaration <code>ld</code> with <code>ty</code> in <code>env</code>.</li></ul><h5 id="example_39"><a href="#example_39" class="anchor"></a>Example</h5><h4 id="typingrule.ldtuple"><a href="#typingrule.ldtuple" class="anchor"></a>TypingRule.LDTuple</h4><h5 id="rule_40"><a href="#rule_40" class="anchor"></a>Rule</h5><h5 id="example_40"><a href="#example_40" class="anchor"></a>Example</h5><h4 id="typingrule.ldtypedtuple"><a href="#typingrule.ldtypedtuple" class="anchor"></a>TypingRule.LDTypedTuple</h4><h5 id="rule_41"><a href="#rule_41" class="anchor"></a>Rule</h5><h5 id="example_41"><a href="#example_41" class="anchor"></a>Example</h5><h3 id="typing-of-statements"><a href="#typing-of-statements" class="anchor"></a>Typing of Statements</h3><p><code>annotate_stmt env s</code> is &lt;description&gt; and one of the following applies:</p><h4 id="typingrule.spass"><a href="#typingrule.spass" class="anchor"></a>TypingRule.SPass</h4><h5 id="rule_42"><a href="#rule_42" class="anchor"></a>Rule</h5><h5 id="example_42"><a href="#example_42" class="anchor"></a>Example</h5><h4 id="typingrule.sassign"><a href="#typingrule.sassign" class="anchor"></a>TypingRule.SAssign</h4><h5 id="rule_43"><a href="#rule_43" class="anchor"></a>Rule</h5><h5 id="example_43"><a href="#example_43" class="anchor"></a>Example</h5><h4 id="typingrule.sreturnnone"><a href="#typingrule.sreturnnone" class="anchor"></a>TypingRule.SReturnNone</h4><h5 id="rule_44"><a href="#rule_44" class="anchor"></a>Rule</h5><h5 id="example_44"><a href="#example_44" class="anchor"></a>Example</h5><h4 id="typingrule.sreturnone"><a href="#typingrule.sreturnone" class="anchor"></a>TypingRule.SReturnOne</h4><h5 id="rule_45"><a href="#rule_45" class="anchor"></a>Rule</h5><h5 id="example_45"><a href="#example_45" class="anchor"></a>Example</h5><h4 id="typingrule.sreturnsome"><a href="#typingrule.sreturnsome" class="anchor"></a>TypingRule.SReturnSome</h4><h5 id="rule_46"><a href="#rule_46" class="anchor"></a>Rule</h5><h5 id="example_46"><a href="#example_46" class="anchor"></a>Example</h5><h4 id="typingrule.sthen"><a href="#typingrule.sthen" class="anchor"></a>TypingRule.SThen</h4><h5 id="rule_47"><a href="#rule_47" class="anchor"></a>Rule</h5><h5 id="example_47"><a href="#example_47" class="anchor"></a>Example</h5><h4 id="typingrule.scall"><a href="#typingrule.scall" class="anchor"></a>TypingRule.SCall</h4><h5 id="rule_48"><a href="#rule_48" class="anchor"></a>Rule</h5><h5 id="example_48"><a href="#example_48" class="anchor"></a>Example</h5><h4 id="typingrule.scond"><a href="#typingrule.scond" class="anchor"></a>TypingRule.SCond</h4><h5 id="rule_49"><a href="#rule_49" class="anchor"></a>Rule</h5><h5 id="example_49"><a href="#example_49" class="anchor"></a>Example</h5><h4 id="typingrule.scase"><a href="#typingrule.scase" class="anchor"></a>TypingRule.SCase</h4><h5 id="rule_50"><a href="#rule_50" class="anchor"></a>Rule</h5><p>&lt;description&gt;</p><h5 id="example_50"><a href="#example_50" class="anchor"></a>Example</h5><h4 id="typingrule.sassert"><a href="#typingrule.sassert" class="anchor"></a>TypingRule.SAssert</h4><h5 id="rule_51"><a href="#rule_51" class="anchor"></a>Rule</h5><h5 id="example_51"><a href="#example_51" class="anchor"></a>Example</h5><h4 id="typingrule.swhile"><a href="#typingrule.swhile" class="anchor"></a>TypingRule.SWhile</h4><h5 id="rule_52"><a href="#rule_52" class="anchor"></a>Rule</h5><h5 id="example_52"><a href="#example_52" class="anchor"></a>Example</h5><h4 id="typingrule.srepeat"><a href="#typingrule.srepeat" class="anchor"></a>TypingRule.SRepeat</h4><h5 id="rule_53"><a href="#rule_53" class="anchor"></a>Rule</h5><h5 id="example_53"><a href="#example_53" class="anchor"></a>Example</h5><h4 id="typingrule.sfor"><a href="#typingrule.sfor" class="anchor"></a>TypingRule.SFor</h4><h5 id="rule_54"><a href="#rule_54" class="anchor"></a>Rule</h5><h5 id="example_54"><a href="#example_54" class="anchor"></a>Example</h5><h4 id="typingrule.sthrownone"><a href="#typingrule.sthrownone" class="anchor"></a>TypingRule.SThrowNone</h4><h5 id="rule_55"><a href="#rule_55" class="anchor"></a>Rule</h5><h5 id="example_55"><a href="#example_55" class="anchor"></a>Example</h5><h4 id="typingrule.sthrowsome"><a href="#typingrule.sthrowsome" class="anchor"></a>TypingRule.SThrowSome</h4><h5 id="rule_56"><a href="#rule_56" class="anchor"></a>Rule</h5><h5 id="example_56"><a href="#example_56" class="anchor"></a>Example</h5><p>&lt;minimal example&gt;</p><h4 id="typingrule.stry"><a href="#typingrule.stry" class="anchor"></a>TypingRule.STry</h4><h5 id="rule_57"><a href="#rule_57" class="anchor"></a>Rule</h5><h5 id="example_57"><a href="#example_57" class="anchor"></a>Example</h5><h4 id="typingrule.sdeclsome"><a href="#typingrule.sdeclsome" class="anchor"></a>TypingRule.SDeclSome</h4><h5 id="rule_58"><a href="#rule_58" class="anchor"></a>Rule</h5><h5 id="example_58"><a href="#example_58" class="anchor"></a>Example</h5><h4 id="typingrule.sdeclnone"><a href="#typingrule.sdeclnone" class="anchor"></a>TypingRule.SDeclNone</h4><h5 id="rule_59"><a href="#rule_59" class="anchor"></a>Rule</h5><h5 id="example_59"><a href="#example_59" class="anchor"></a>Example</h5><h4 id="typingrule.sdebug"><a href="#typingrule.sdebug" class="anchor"></a>TypingRule.SDebug</h4><h5 id="rule_60"><a href="#rule_60" class="anchor"></a>Rule</h5><h5 id="example_60"><a href="#example_60" class="anchor"></a>Example</h5><p>&lt;minimal example&gt;</p><h3 id="typing-of-slices"><a href="#typing-of-slices" class="anchor"></a>Typing of Slices</h3><p><code>annotate_slices env slices</code> is &lt;description&gt; Formally, one of the following applies:</p><h4 id="typingrule.slicelength"><a href="#typingrule.slicelength" class="anchor"></a>TypingRule.SliceLength</h4><h5 id="rule_61"><a href="#rule_61" class="anchor"></a>Rule</h5><h5 id="example_61"><a href="#example_61" class="anchor"></a>Example</h5><h4 id="typingrule.slicesingle"><a href="#typingrule.slicesingle" class="anchor"></a>TypingRule.SliceSingle</h4><h5 id="rule_62"><a href="#rule_62" class="anchor"></a>Rule</h5><h5 id="example_62"><a href="#example_62" class="anchor"></a>Example</h5><h4 id="typingrule.slicerange"><a href="#typingrule.slicerange" class="anchor"></a>TypingRule.SliceRange</h4><h5 id="rule_63"><a href="#rule_63" class="anchor"></a>Rule</h5><h5 id="example_63"><a href="#example_63" class="anchor"></a>Example</h5><h4 id="typingrule.slicestar"><a href="#typingrule.slicestar" class="anchor"></a>TypingRule.SliceStar</h4><h5 id="rule_64"><a href="#rule_64" class="anchor"></a>Rule</h5><h5 id="example_64"><a href="#example_64" class="anchor"></a>Example</h5><h3 id="typing-of-patterns"><a href="#typing-of-patterns" class="anchor"></a>Typing of Patterns</h3><p><code>annotate_pattern env pos v p</code> is &lt;description&gt;. Formally, one of the following applies:</p><h4 id="typingrule.pall"><a href="#typingrule.pall" class="anchor"></a>TypingRule.PAll</h4><h5 id="rule_65"><a href="#rule_65" class="anchor"></a>Rule</h5><h5 id="example_65"><a href="#example_65" class="anchor"></a>Example</h5><h4 id="typingrule.pany"><a href="#typingrule.pany" class="anchor"></a>TypingRule.PAny</h4><h5 id="rule_66"><a href="#rule_66" class="anchor"></a>Rule</h5><h5 id="example_66"><a href="#example_66" class="anchor"></a>Example</h5><h4 id="typingrule.pnot"><a href="#typingrule.pnot" class="anchor"></a>TypingRule.PNot</h4><h5 id="rule_67"><a href="#rule_67" class="anchor"></a>Rule</h5><h5 id="example_67"><a href="#example_67" class="anchor"></a>Example</h5><h4 id="typingrule.psingle"><a href="#typingrule.psingle" class="anchor"></a>TypingRule.PSingle</h4><h5 id="rule_68"><a href="#rule_68" class="anchor"></a>Rule</h5><h5 id="example_68"><a href="#example_68" class="anchor"></a>Example</h5><h4 id="typingrule.pgeq"><a href="#typingrule.pgeq" class="anchor"></a>TypingRule.PGeq</h4><h5 id="rule_69"><a href="#rule_69" class="anchor"></a>Rule</h5><h5 id="example_69"><a href="#example_69" class="anchor"></a>Example</h5><h4 id="typingrule.pleq"><a href="#typingrule.pleq" class="anchor"></a>TypingRule.PLeq</h4><h5 id="rule_70"><a href="#rule_70" class="anchor"></a>Rule</h5><h5 id="example_70"><a href="#example_70" class="anchor"></a>Example</h5><h4 id="typingrule.prange"><a href="#typingrule.prange" class="anchor"></a>TypingRule.PRange</h4><h5 id="rule_71"><a href="#rule_71" class="anchor"></a>Rule</h5><h5 id="example_71"><a href="#example_71" class="anchor"></a>Example</h5><h4 id="typingrule.pmask"><a href="#typingrule.pmask" class="anchor"></a>TypingRule.PMask</h4><h5 id="rule_72"><a href="#rule_72" class="anchor"></a>Rule</h5><h5 id="example_72"><a href="#example_72" class="anchor"></a>Example</h5><h4 id="typingrule.ptuple"><a href="#typingrule.ptuple" class="anchor"></a>TypingRule.PTuple</h4><h5 id="rule_73"><a href="#rule_73" class="anchor"></a>Rule</h5><h5 id="example_73"><a href="#example_73" class="anchor"></a>Example</h5><h3 id="typing-of-blocks"><a href="#typing-of-blocks" class="anchor"></a>Typing of Blocks</h3><h4 id="typingrule.block"><a href="#typingrule.block" class="anchor"></a>TypingRule.Block</h4><h5 id="rule_74"><a href="#rule_74" class="anchor"></a>Rule</h5><p><code>annotate_block env stm</code> is &lt;description&gt;.</p><h5 id="example_74"><a href="#example_74" class="anchor"></a>Example</h5><p>&lt;minimal example&gt;</p><h3 id="typing-of-catchers"><a href="#typing-of-catchers" class="anchor"></a>Typing of Catchers</h3><p><code>annotate_catchers env catchers otherwise_opt s_m</code></p><h4 id="typingrule.catcher"><a href="#typingrule.catcher" class="anchor"></a>TypingRule.Catcher</h4><h5 id="rule_75"><a href="#rule_75" class="anchor"></a>Rule</h5><p>&lt;description&gt;</p><h5 id="example_75"><a href="#example_75" class="anchor"></a>Example</h5><p>&lt;minimal example&gt;</p><h3 id="typing-of-function-calls"><a href="#typing-of-function-calls" class="anchor"></a>Typing of Function Calls</h3><p><code>annotate_call pos name env args named_args</code> annotates the call to function <code>name</code> with arguments <code>args</code> and parameters <code>named_args</code>.</p><h4 id="typingrule.fcall"><a href="#typingrule.fcall" class="anchor"></a>TypingRule.FCall</h4><h5 id="rule_76"><a href="#rule_76" class="anchor"></a>Rule</h5><p>&lt;description&gt;</p><h5 id="example_76"><a href="#example_76" class="anchor"></a>Example</h5><p>At the begining of a program, the interpreter annotates the function &quot;main&quot;.</p><h3 id="typing-of-functions"><a href="#typing-of-functions" class="anchor"></a>Typing of Functions</h3><p><code>annotate_func genv name pos actual_args params</code> annotates the function named <code>name</code> &lt;description&gt; and one of the following applies:</p><h4 id="typingrule.func"><a href="#typingrule.func" class="anchor"></a>TypingRule.Func</h4><h5 id="rule_77"><a href="#rule_77" class="anchor"></a>Rule</h5><h5 id="example_77"><a href="#example_77" class="anchor"></a>Example</h5></div></body></html>